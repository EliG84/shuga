
<ng-container *ngTemplateOutlet="fastingMode ? fastingOnly : allReadings"></ng-container>

<ng-template #fastingOnly>
  <div class="readings-container" *ngIf='readings.length; else noReadings'>
    <div class="reading"
         [ngClass]='{"reading--morning": reading.isMorningReading}'
         *ngFor='let reading of readings; trackBy:identify'>
      <span class="edit"
           (click)='update(reading)'>
           <mat-icon>edit</mat-icon>
      </span>
      <span>{{reading.date | date : 'dd/MM/YY' }}</span>
      <span>{{reading.time | date : 'hh:mm' }}</span>
      <span>{{reading.result}}</span>
      <span class="delete"
            (click)='delete(reading._id!)'>
            <mat-icon>delete_outline</mat-icon>
      </span>
    </div>
  </div>
  <ng-template #noReadings>
    <div class="readings-container readings-container--empty">
      <h3>{{'EMPTY_PAGE.GENERIC_EMPTY' | translate}}</h3>
    </div>
  </ng-template>
</ng-template>


<ng-template #allReadings>
  <div class="readings-container" *ngIf='readingsTable.length; else noReadings'>
      <table class="readings-table"
             mat-table
             [dataSource]="readingsTable"
             dir="rtl">

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>
              <mat-icon>date_range</mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            <span>{{element.date | date : 'dd/MM/yy'}}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="fasting">
          <th mat-header-cell *matHeaderCellDef>
            <mat-icon>exposure_zero</mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            <span>{{element.fasting || '---'}}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="morning">
          <th mat-header-cell *matHeaderCellDef>
            <mat-icon>light_mode</mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            <span>{{element.morning || '---'}}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="afterNoon">
          <th mat-header-cell *matHeaderCellDef>
            <mat-icon>restaurant</mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            <span>{{element.afterNoon || '---'}}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="evening">
          <th mat-header-cell *matHeaderCellDef>
            <mat-icon>nightlight_round</mat-icon>
          </th>
          <td mat-cell *matCellDef="let element">
            <span>{{element.evening || '---'}}</span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true" class="table-header-row"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
  <ng-template #noReadings>
    <div class="readings-container readings-container--empty">
      <h3>{{'EMPTY_PAGE.GENERIC_EMPTY' | translate}}</h3>
    </div>
  </ng-template>
</ng-template>
